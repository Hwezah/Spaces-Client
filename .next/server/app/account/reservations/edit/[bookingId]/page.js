(()=>{var e={};e.id=385,e.ids=[385],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},87705:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>l}),a(81731),a(48278),a(55886),a(81798),a(20784),a(89204),a(41888);var r=a(23191),s=a(88716),n=a(37922),i=a.n(n),o=a(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);a.d(t,d);let l=["",{children:["account",{children:["reservations",{children:["edit",{children:["[bookingId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,81731)),"C:\\Users\\DELL\\Desktop\\Spaces(Client)\\app\\account\\reservations\\edit\\[bookingId]\\page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,48278)),"C:\\Users\\DELL\\Desktop\\Spaces(Client)\\app\\account\\layout.js"],loading:[()=>Promise.resolve().then(a.bind(a,55886)),"C:\\Users\\DELL\\Desktop\\Spaces(Client)\\app\\account\\loading.js"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,81798)),"C:\\Users\\DELL\\Desktop\\Spaces(Client)\\app\\layout.js"],error:[()=>Promise.resolve().then(a.bind(a,20784)),"C:\\Users\\DELL\\Desktop\\Spaces(Client)\\app\\error.js"],loading:[()=>Promise.resolve().then(a.bind(a,89204)),"C:\\Users\\DELL\\Desktop\\Spaces(Client)\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,41888)),"C:\\Users\\DELL\\Desktop\\Spaces(Client)\\app\\not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\DELL\\Desktop\\Spaces(Client)\\app\\account\\reservations\\edit\\[bookingId]\\page.js"],u="/account/reservations/edit/[bookingId]/page",p={require:a,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/account/reservations/edit/[bookingId]/page",pathname:"/account/reservations/edit/[bookingId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},43457:(e,t,a)=>{let r={"1a41a44641fcf550a5968504b1ae5eabb3287dba":()=>Promise.resolve().then(a.bind(a,91779)).then(e=>e.deleteBookingAction),"66f86fd1490cd954b5d6f7917c109be62b7801ae":()=>Promise.resolve().then(a.bind(a,91779)).then(e=>e.createBookingAction),"6c6faafe8ea32be926654cc9704522ad7da6944c":()=>Promise.resolve().then(a.bind(a,91779)).then(e=>e.signOutAction),"85d9eb2d26ff22ca791d19f087ca23edcd64ada3":()=>Promise.resolve().then(a.bind(a,91779)).then(e=>e.updateBookingAction),aa1ff7e5a7b0c9759d8ec35a6897f777e9d66a5d:()=>Promise.resolve().then(a.bind(a,91779)).then(e=>e.signInAction),dd1f09d87b9dead41fb5ef5930d6c8e69876d6c0:()=>Promise.resolve().then(a.bind(a,91779)).then(e=>e.updateGuestAction)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={"1a41a44641fcf550a5968504b1ae5eabb3287dba":s.bind(null,"1a41a44641fcf550a5968504b1ae5eabb3287dba"),"66f86fd1490cd954b5d6f7917c109be62b7801ae":s.bind(null,"66f86fd1490cd954b5d6f7917c109be62b7801ae"),"6c6faafe8ea32be926654cc9704522ad7da6944c":s.bind(null,"6c6faafe8ea32be926654cc9704522ad7da6944c"),"85d9eb2d26ff22ca791d19f087ca23edcd64ada3":s.bind(null,"85d9eb2d26ff22ca791d19f087ca23edcd64ada3"),aa1ff7e5a7b0c9759d8ec35a6897f777e9d66a5d:s.bind(null,"aa1ff7e5a7b0c9759d8ec35a6897f777e9d66a5d"),dd1f09d87b9dead41fb5ef5930d6c8e69876d6c0:s.bind(null,"dd1f09d87b9dead41fb5ef5930d6c8e69876d6c0")}},8963:(e,t,a)=>{Promise.resolve().then(a.bind(a,206)),Promise.resolve().then(a.t.bind(a,79404,23))},206:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var r=a(10326),s=a(60962);function n({children:e,pendingLabel:t}){let{pending:a}=(0,s.useFormStatus)();return r.jsx("button",{className:"bg-accent-500 px-8 py-4 text-primary-800 font-semibold hover:bg-accent-600 transition-all disabled:cursor-not-allowed disabled:bg-gray-500 disabled:text-gray-300",disabled:a,children:a?t:e})}},90434:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(79404),s=a.n(r)},35047:(e,t,a)=>{"use strict";var r=a(77389);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},46242:(e,t,a)=>{"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return s}});let r=a(15424);function s(e){let{createServerReference:t}=a(56493);return t(e,r.callServer)}},91779:(e,t,a)=>{"use strict";a.r(t),a.d(t,{createBookingAction:()=>b,deleteBookingAction:()=>p,signInAction:()=>l,signOutAction:()=>c,updateBookingAction:()=>f,updateGuestAction:()=>u});var r=a(24330);a(60166);var s=a(57708),n=a(76177),i=a(37286),o=a(99115),d=a(58585);async function l(){await (0,n.zB)("google",{redirectTo:"/account"})}async function c(){await (0,n.w7)({redirectTo:"/"})}async function u(e){let t=await (0,n.I8)();if(!t)throw Error("You must be logged in");let a=e.get("nationalID"),[r,o]=e.get("nationality").split("%");if(!/^[a-zA-Z0-9]{6,12}$/.test(a))throw Error("Please provide a valid national ID");let{data:d,error:l}=await i.O.from("guests").update({nationality:r,countryFlag:o,nationalID:a}).eq("id",t.user.guestId);if(l)throw Error("Guest could not be updated");(0,s.revalidatePath)("/account/profile")}async function p(e){let t=await (0,n.I8)();if(!t)throw Error("You must be logged in");if(!(await (0,o.aL)(t.user.guestId)).map(e=>e.id).includes(e))throw Error("You are not authorized to delete this booking");await (0,o.FF)(e),(0,s.revalidatePath)("/account/reservations")}async function f(e){console.log(e);let t=Number(e.get("bookingId")),a=await (0,n.I8)();if(!a)throw Error("You must be logged in");if(!(await (0,o.aL)(a.user.guestId)).map(e=>e.id).includes(t))throw Error("You are not authorized to update this booking");let r={numGuests:Number(e.get("numGuests")),observations:e.get("observations").slice(0,1e3)},{error:l}=await i.O.from("bookings").update(r).eq("id",t).select().single();if(l)throw Error("Booking could not be updated");(0,s.revalidatePath)("/account/reservations"),(0,s.revalidatePath)(`/account/reservations/edit/${t}`),(0,d.redirect)("/account/reservations")}async function b(e,t){let a=await (0,n.I8)();if(!a)throw Error("You must be logged in");let r={...e,guestId:a.user.guestId,observations:t.get("observations").slice(0,1e3),numGuests:Number(t.get("numGuests")),extrasPrice:0,totalPrice:e.spacePrice,isPaid:!1,hasBreakfast:!1,status:"unconfirmed"},{error:o}=await i.O.from("bookings").insert([r]);if(o)throw Error("Booking could not be created");(0,s.revalidatePath)(`/spaces/${e.spaceId}`),(0,d.redirect)("/spaces/thankyou")}(0,a(40618).h)([l,c,u,p,f,b]),(0,r.j)("aa1ff7e5a7b0c9759d8ec35a6897f777e9d66a5d",l),(0,r.j)("6c6faafe8ea32be926654cc9704522ad7da6944c",c),(0,r.j)("dd1f09d87b9dead41fb5ef5930d6c8e69876d6c0",u),(0,r.j)("1a41a44641fcf550a5968504b1ae5eabb3287dba",p),(0,r.j)("85d9eb2d26ff22ca791d19f087ca23edcd64ada3",f),(0,r.j)("66f86fd1490cd954b5d6f7917c109be62b7801ae",b)},81731:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(19510),s=a(99115),n=a(91779);let i=(0,a(68570).createProxy)(String.raw`C:\Users\DELL\Desktop\Spaces(Client)\app\_components\SubmitButton.js#default`);async function o({params:e}){let{bookingId:t}=e,{numGuests:a,observations:o,spaceId:d}=await (0,s.lx)(t),{maxCapacity:l}=await (0,s.Pj)(d);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"font-semibold text-2xl text-accent-400 mb-7",children:["Edit Reservation #",t]}),(0,r.jsxs)("form",{action:n.updateBookingAction,className:"bg-primary-900 py-8 px-12 text-lg flex gap-6 flex-col",children:[r.jsx("input",{type:"hidden",name:"bookingId",value:t}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"numGuests",children:"How many guests?"}),(0,r.jsxs)("select",{name:"numGuests",defaultValue:a,id:"numGuests",className:"px-5 py-3 bg-primary-200 text-primary-800 w-full shadow-sm rounded-sm",required:!0,children:[r.jsx("option",{value:"",children:"Select number of guests..."},""),Array.from({length:l},(e,t)=>t+1).map(e=>(0,r.jsxs)("option",{value:e,children:[e," ",1===e?"guest":"guests"]},e))]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"observations",children:"Anything we should know about your stay?"}),r.jsx("textarea",{name:"observations",defaultValue:o,id:"observations",rows:"4",className:"px-5 py-3 bg-primary-200 text-primary-800 w-full shadow-sm rounded-sm"})]}),r.jsx("div",{className:"flex justify-end items-center gap-6",children:r.jsx(i,{pendingLabel:"Updating...",children:"Update Reservation"})})]})]})}},3955:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(17577);let s=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm10.72 4.72a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a.75.75 0 0 1 0-1.5h10.94l-1.72-1.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))})},82692:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(17577);let s=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),r.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))})},43977:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(17577);let s=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),r.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))})},18474:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(17577);let s=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948,782,362,650,708,341,822],()=>a(87705));module.exports=r})();